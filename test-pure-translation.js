// Test de la traduction PURE (sans mÃ©lange de langues)
console.log('ðŸ”§ Test de la traduction PURE');

// Fonctions de traduction complÃ¨tes (copiÃ©es de ImprovedChatInterface.tsx)
const getCompleteArabicFamilyLawContent = () => {
    return `Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø£Ø³Ø±Ø© ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±

Ø§Ù„Ø£Ø³Ø±Ø© Ù‡ÙŠ Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ ÙˆÙ‡ÙŠ Ù…Ø­Ù…ÙŠØ© Ø¨Ù…ÙˆØ¬Ø¨ Ø§Ù„Ø¯Ø³ØªÙˆØ± ÙˆØ§Ù„Ù‚Ø§Ù†ÙˆÙ†.

Ø§Ù„Ø²ÙˆØ§Ø¬:
Ø§Ù„Ø²ÙˆØ§Ø¬ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ù…Ø­ÙƒÙˆÙ… Ø¨Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ. Ø§Ù„Ø²ÙˆØ§Ø¬ Ø¹Ù‚Ø¯ Ø´Ø±Ø¹ÙŠ ÙˆÙ…Ø¯Ù†ÙŠ ÙŠØªÙ… Ø¨ÙŠÙ† Ø±Ø¬Ù„ ÙˆØ§Ù…Ø±Ø£Ø© Ø¨Ø§Ù„ØºÙŠÙ† Ø¹Ø§Ù‚Ù„ÙŠÙ†. ÙŠØªØ·Ù„Ø¨ Ø§Ù„Ø²ÙˆØ§Ø¬ Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø·Ø±ÙÙŠÙ† ÙˆØ­Ø¶ÙˆØ± Ø§Ù„Ø´Ù‡ÙˆØ¯ ÙˆØ§Ù„ÙˆÙ„ÙŠ Ù„Ù„Ù…Ø±Ø£Ø© ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø§Ù„Ø§Øª.

Ø§Ù„Ø·Ù„Ø§Ù‚:
Ø§Ù„Ø·Ù„Ø§Ù‚ Ù…Ø³Ù…ÙˆØ­ ÙÙŠ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ ÙˆÙ„ÙƒÙ† Ø¨Ø´Ø±ÙˆØ· Ù…Ø­Ø¯Ø¯Ø©. ÙŠÙ…ÙƒÙ† Ù„Ù„Ø²ÙˆØ¬ Ø£Ùˆ Ø§Ù„Ø²ÙˆØ¬Ø© Ø·Ù„Ø¨ Ø§Ù„Ø·Ù„Ø§Ù‚ Ø£Ù…Ø§Ù… Ø§Ù„Ù…Ø­ÙƒÙ…Ø©. Ù‡Ù†Ø§Ùƒ Ø£Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„ÙØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø§Ù‚ Ù…Ù†Ù‡Ø§ Ø§Ù„Ø·Ù„Ø§Ù‚ Ø¨Ø§Ù„ØªØ±Ø§Ø¶ÙŠ ÙˆØ§Ù„Ø·Ù„Ø§Ù‚ Ù„Ù„Ø¶Ø±Ø± ÙˆØ§Ù„Ø·Ù„Ø§Ù‚ Ù„Ù„Ø´Ù‚Ø§Ù‚.

Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø£Ø·ÙØ§Ù„:
Ø§Ù„Ø£Ø·ÙØ§Ù„ Ù„Ù‡Ù… Ø­Ù‚ÙˆÙ‚ Ù…Ø­Ù…ÙŠØ© Ø¨Ù…ÙˆØ¬Ø¨ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ. Ù‡Ø°Ù‡ Ø§Ù„Ø­Ù‚ÙˆÙ‚ ØªØ´Ù…Ù„ Ø§Ù„Ø­Ù‚ ÙÙŠ Ø§Ù„Ù†ÙÙ‚Ø© ÙˆØ§Ù„Ø­Ø¶Ø§Ù†Ø© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ… ÙˆØ§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©. Ø§Ù„Ø£Ø¨ Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ù†ÙÙ‚Ø© ÙˆØ§Ù„Ø£Ù… Ù„Ù‡Ø§ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© ÙÙŠ Ø§Ù„Ø­Ø¶Ø§Ù†Ø© Ù„Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„ØµØºØ§Ø±.

Ø§Ù„Ù…ÙŠØ±Ø§Ø«:
Ø§Ù„Ù…ÙŠØ±Ø§Ø« ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ù…Ø­ÙƒÙˆÙ… Ø¨Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ø´Ø±ÙŠØ¹Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©. Ù„Ù„Ø°ÙƒØ± Ù…Ø«Ù„ Ø­Ø¸ Ø§Ù„Ø£Ù†Ø«ÙŠÙŠÙ† ÙÙŠ Ù…Ø¹Ø¸Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª. Ø§Ù„ÙˆØ§Ù„Ø¯Ø§Ù† ÙˆØ§Ù„Ø£Ø²ÙˆØ§Ø¬ ÙˆØ§Ù„Ø£Ø·ÙØ§Ù„ Ù„Ù‡Ù… Ø­Ù‚ÙˆÙ‚ Ø«Ø§Ø¨ØªØ© ÙÙŠ Ø§Ù„Ù…ÙŠØ±Ø§Ø«.

Ù‡Ø°Ù‡ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø© Ø¹Ù† Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ. Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù…ÙØµÙ„Ø©ØŒ ÙŠÙÙ†ØµØ­ Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù…Ø­Ø§Ù…Ù Ù…Ø®ØªØµ.`;
};

const getCompleteFrenchFamilyLawContent = () => {
    return `Le Droit de la Famille en AlgÃ©rie

La famille constitue la cellule de base de la sociÃ©tÃ© algÃ©rienne et est protÃ©gÃ©e par la Constitution et la loi.

Le Mariage:
Le mariage en AlgÃ©rie est rÃ©gi par le Code de la famille algÃ©rien. Le mariage est un contrat lÃ©gal et religieux entre un homme et une femme majeurs et capables. Le mariage nÃ©cessite le consentement des deux parties, la prÃ©sence de tÃ©moins et du tuteur de la femme dans certains cas.

Le Divorce:
Le divorce est autorisÃ© par la loi algÃ©rienne mais sous certaines conditions. L'Ã©poux ou l'Ã©pouse peut demander le divorce devant le tribunal. Il existe diffÃ©rents types de divorce notamment le divorce par consentement mutuel, le divorce pour prÃ©judice et le divorce pour discorde.

Les Droits des Enfants:
Les enfants ont des droits protÃ©gÃ©s par la loi algÃ©rienne. Ces droits incluent le droit Ã  la pension alimentaire, Ã  la garde, Ã  l'Ã©ducation et aux soins de santÃ©. Le pÃ¨re est responsable de la pension alimentaire et la mÃ¨re a la prioritÃ© pour la garde des jeunes enfants.

L'HÃ©ritage:
L'hÃ©ritage en AlgÃ©rie est rÃ©gi par les dispositions de la loi islamique. L'homme hÃ©rite gÃ©nÃ©ralement le double de la part de la femme. Les parents, conjoints et enfants ont des droits fixes dans l'hÃ©ritage.

Ces informations sont gÃ©nÃ©rales sur le droit de la famille algÃ©rien. Pour obtenir des conseils juridiques dÃ©taillÃ©s, il est recommandÃ© de consulter un avocat spÃ©cialisÃ©.`;
};

// Test de puretÃ© linguistique
function analyzeLanguagePurity(text, expectedLang) {
    const arabicChars = (text.match(/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF]/g) || []).length;
    const latinChars = (text.match(/[a-zA-ZÃ€-Ã¿]/g) || []).length;
    const totalChars = text.replace(/\s/g, '').length;
    
    if (totalChars === 0) return { pure: false, reason: 'Texte vide' };
    
    const arabicRatio = arabicChars / totalChars;
    const latinRatio = latinChars / totalChars;
    
    console.log(`ðŸ“Š Analyse linguistique:`);
    console.log(`   - CaractÃ¨res arabes: ${arabicChars} (${Math.round(arabicRatio * 100)}%)`);
    console.log(`   - CaractÃ¨res latins: ${latinChars} (${Math.round(latinRatio * 100)}%)`);
    console.log(`   - Total caractÃ¨res: ${totalChars}`);
    
    if (expectedLang === 'ar') {
        // Pour l'arabe, on veut > 95% de caractÃ¨res arabes
        const isPure = arabicRatio > 0.95 && latinRatio < 0.05;
        return { 
            pure: isPure, 
            reason: isPure ? 'Texte purement arabe' : `MÃ©lange dÃ©tectÃ©: ${Math.round(latinRatio * 100)}% latin`,
            arabicRatio,
            latinRatio
        };
    } else {
        // Pour le franÃ§ais, on veut > 95% de caractÃ¨res latins
        const isPure = latinRatio > 0.95 && arabicRatio < 0.05;
        return { 
            pure: isPure, 
            reason: isPure ? 'Texte purement franÃ§ais' : `MÃ©lange dÃ©tectÃ©: ${Math.round(arabicRatio * 100)}% arabe`,
            arabicRatio,
            latinRatio
        };
    }
}

console.log('\n=== TEST 1: Contenu arabe pur ===');
const arabicContent = getCompleteArabicFamilyLawContent();
console.log('Contenu (aperÃ§u):', arabicContent.substring(0, 200) + '...');
const arabicAnalysis = analyzeLanguagePurity(arabicContent, 'ar');
console.log('âœ… RÃ©sultat:', arabicAnalysis.pure ? 'PURE' : 'MÃ‰LANGÃ‰');
console.log('ðŸ“ Raison:', arabicAnalysis.reason);

console.log('\n=== TEST 2: Contenu franÃ§ais pur ===');
const frenchContent = getCompleteFrenchFamilyLawContent();
console.log('Contenu (aperÃ§u):', frenchContent.substring(0, 200) + '...');
const frenchAnalysis = analyzeLanguagePurity(frenchContent, 'fr');
console.log('âœ… RÃ©sultat:', frenchAnalysis.pure ? 'PURE' : 'MÃ‰LANGÃ‰');
console.log('ðŸ“ Raison:', frenchAnalysis.reason);

console.log('\n=== TEST 3: Comparaison avec contenu mÃ©langÃ© ===');
const mixedContent = `La Ø§Ù„Ø£Ø³Ø±Ø© est un sujet important en Ø§Ù„Ø­Ù‚ algÃ©rien. Le Ù‚Ø§Ù†ÙˆÙ† de la Ø§Ù„Ø£Ø³Ø±Ø© est un ensemble de lois qui rÃ©gissent les relations familiales en AlgÃ©rie.`;
console.log('Contenu mÃ©langÃ©:', mixedContent);
const mixedAnalysis = analyzeLanguagePurity(mixedContent, 'fr');
console.log('âŒ RÃ©sultat:', mixedAnalysis.pure ? 'PURE' : 'MÃ‰LANGÃ‰');
console.log('ðŸ“ Raison:', mixedAnalysis.reason);

console.log('\nðŸŽ¯ CONCLUSION:');
console.log(`âœ… Contenu arabe pur: ${arabicAnalysis.pure ? 'OUI' : 'NON'}`);
console.log(`âœ… Contenu franÃ§ais pur: ${frenchAnalysis.pure ? 'OUI' : 'NON'}`);
console.log(`âŒ Contenu mÃ©langÃ© dÃ©tectÃ©: ${!mixedAnalysis.pure ? 'OUI' : 'NON'}`);

if (arabicAnalysis.pure && frenchAnalysis.pure && !mixedAnalysis.pure) {
    console.log('\nðŸŽ‰ âœ… SUCCÃˆS: Les nouvelles fonctions produisent du contenu PUR dans chaque langue!');
} else {
    console.log('\nâš ï¸ âŒ Ã‰CHEC: Les fonctions ne produisent pas du contenu assez pur.');
}

console.log('\nðŸ”§ âœ… Test de traduction pure terminÃ©');