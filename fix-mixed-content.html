<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix Mixed Content - JuristDZ</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-area { background: #2a2a2a; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .original { color: #ff6b6b; margin: 10px 0; }
        .cleaned { color: #51cf66; margin: 10px 0; }
        .button { background: #c29b40; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 5px; }
        .button:hover { background: #e5c983; }
        .status { font-weight: bold; margin: 10px 0; }
        .success { color: #51cf66; }
        .fail { color: #ff6b6b; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¥ Fix Mixed Content - JuristDZ</h1>
        
        <div class="test-area">
            <h2>Test avec votre contenu problÃ©matique:</h2>
            <div class="original">
                <strong>Original:</strong><br>
                <span id="original-text">Ù…Ø­Ø§Ù…ÙŠ Ø¯ÙŠ Ø²Ø§Ø¯Ù…ØªØµÙ„Ù…Ø­Ø§Ù…ÙŠÙ…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…Ø¨Ø­Ø« Ù‚Ø§Ù†ÙˆÙ†ÙŠØªØ­Ø±ÙŠØ±ProØªØ­Ù„ÙŠÙ„Ù…Ù„ÙØ§ØªV2</span>
            </div>
            <div class="cleaned">
                <strong>NettoyÃ©:</strong><br>
                <span id="cleaned-text"></span>
            </div>
            <div class="status" id="status"></div>
            <button class="button" onclick="cleanContent()">ğŸ”¥ Nettoyer le contenu</button>
            <button class="button" onclick="testAllPatterns()">ğŸ§ª Tester tous les patterns</button>
        </div>
        
        <div class="test-area">
            <h2>Entrez votre propre texte:</h2>
            <textarea id="custom-text" style="width: 100%; height: 100px; background: #333; color: white; border: 1px solid #555; padding: 10px;" placeholder="Collez ici le texte avec du contenu mixte..."></textarea>
            <br>
            <button class="button" onclick="cleanCustomText()">ğŸ”¥ Nettoyer le texte personnalisÃ©</button>
            <div id="custom-result" style="margin-top: 10px;"></div>
        </div>
        
        <div class="test-area" id="all-tests" style="display: none;">
            <h2>RÃ©sultats de tous les tests:</h2>
            <div id="test-results"></div>
        </div>
    </div>

    <script>
        // Nuclear cleaning function - SOLUTION FINALE
        function nuclearClean(text) {
            if (!text || typeof text !== 'string') return text;

            let cleaned = text;

            // NUCLEAR FIXES - tous les patterns problÃ©matiques
            const nuclearFixes = [
                // Pattern principal du user
                { from: /Ù…Ø­Ø§Ù…ÙŠ Ø¯ÙŠ Ø²Ø§Ø¯Ù…ØªØµÙ„Ù…Ø­Ø§Ù…ÙŠÙ…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…Ø¨Ø­Ø« Ù‚Ø§Ù†ÙˆÙ†ÙŠØªØ­Ø±ÙŠØ±ProØªØ­Ù„ÙŠÙ„Ù…Ù„ÙØ§ØªV2/g, to: 'Ù…Ø­Ø§Ù…ÙŠ' },
                { from: /Ù…Ø­Ø§Ù…ÙŠ Ø¯ÙŠ Ø²Ø§Ø¯Ù…ØªØµÙ„Ù…Ø­Ø§Ù…ÙŠProØªØ­Ù„ÙŠÙ„Ù…Ù„ÙØ§ØªV2AUTO-TRANSLATE/g, to: 'Ù…Ø­Ø§Ù…ÙŠ' },
                
                // Patterns concatenÃ©s exacts
                { from: /Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠÙ…ØªØµÙ„Avocat/g, to: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ' },
                { from: /Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠÙ…ØªØµÙ„/g, to: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ' },
                { from: /Ù…ØªØµÙ„Avocat/g, to: 'Ù…Ø­Ø§Ù…ÙŠ' },
                { from: /Cabinet d'AvocatCabinet d'Avocat/g, to: 'Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©' },
                { from: /Cabinet d'AvocatCabinet/g, to: 'Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©' },
                { from: /AvocatCabinet d'Avocat/g, to: 'Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©' },
                { from: /ProAnalyseDossiersV2/g, to: 'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª' },
                { from: /ProAnalyse/g, to: 'ØªØ­Ù„ÙŠÙ„' },
                { from: /DossiersV2/g, to: 'Ø§Ù„Ù…Ù„ÙØ§Øª' },
                { from: /SystÃ¨me JuridiqueTableau de Bord/g, to: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' },
                { from: /SystÃ¨me Juridique/g, to: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ' },
                { from: /Tableau de Bord/g, to: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' },
                { from: /Recherche JuridiqueRÃ©daction/g, to: 'Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ - Ø§Ù„ØªØ­Ø±ÙŠØ±' },
                { from: /Recherche Juridique/g, to: 'Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ' },
                { from: /Actions Rapides\+ Nouveau Dossier/g, to: 'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø© - Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯' },
                { from: /Actions Rapides/g, to: 'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©' },
                { from: /\+ Nouveau Dossier/g, to: 'Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯' },
                { from: /\+ Recherche Express/g, to: 'Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹' },
                { from: /Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„ØªÙƒÙ„ÙŠÙ Ø´Ù‡ÙˆØ¯Ø§Ù„procedure Ù„ØªÙƒÙ„ÙŠÙ Ø´Ù‡ÙˆØ¯/g, to: 'Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„ØªÙƒÙ„ÙŠÙ Ø´Ù‡ÙˆØ¯' },
                { from: /Ø§Ù„procedure Ù„ØªÙƒÙ„ÙŠÙ/g, to: 'Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„ØªÙƒÙ„ÙŠÙ' },
                { from: /procedure Ù„ØªÙƒÙ„ÙŠÙ/g, to: 'Ø¥Ø¬Ø±Ø§Ø¡ ØªÙƒÙ„ÙŠÙ' },
                { from: /Ù…Ø­Ø§Ù…ÙŠ Ø¯ÙŠ Ø²Ø§Ø¯Ù…ØªØµÙ„Ù…Ø­Ø§Ù…ÙŠ/g, to: 'Ù…Ø­Ø§Ù…ÙŠ' },
                { from: /ProØªØ­Ù„ÙŠÙ„Ù…Ù„ÙØ§ØªV2/g, to: 'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª' },
                { from: /AUTO-TRANSLATE/g, to: '' },
                { from: /Defined ÙÙŠ Ø§Ù„Ù…Ø§Ø¯Ø©/g, to: 'Ù…Ø¹Ø±Ù ÙÙŠ Ø§Ù„Ù…Ø§Ø¯Ø©' },
                { from: /Ø§Ù„ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ´Ø©/g, to: 'Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡' },
                { from: /Ğ¿Ñ€Ğ¾Ñ†ĞµĞ´Ø©/g, to: 'Ø¥Ø¬Ø±Ø§Ø¡' },
                { from: /Ù…Ø­Ø§Ù…ÙŠ Ø¯ÙŠ Ø²Ø§Ø¯/g, to: 'Ù…Ø­Ø§Ù…ÙŠ' },
                { from: /Ù…Ø­Ø§Ù…ÙŠØ¯ÙŠ/g, to: 'Ù…Ø­Ø§Ù…ÙŠ' },
                { from: /Ù…Ø­Ø§Ù…ÙŠProØªØ­Ù„ÙŠÙ„/g, to: 'Ù…Ø­Ø§Ù…ÙŠ - ØªØ­Ù„ÙŠÙ„' },
                { from: /Ù…Ù„ÙØ§ØªV2/g, to: 'Ø§Ù„Ù…Ù„ÙØ§Øª' },
                
                // Suppression des artefacts
                { from: /Pro(?=[Ø£-ÙŠ])/g, to: '' },
                { from: /V2(?=[Ø£-ÙŠ])/g, to: '' },
                { from: /([Ø£-ÙŠ]+)Pro/g, to: '$1' },
                { from: /([Ø£-ÙŠ]+)V2/g, to: '$1' },
                { from: /\bPro\b/g, to: '' },
                { from: /\bV2\b/g, to: '' },
                { from: /\bAUTO-TRANSLATE\b/g, to: '' },
                { from: /\bJuristDZ\b/g, to: '' },
                { from: /\bEn ligne\b/g, to: '' },
                { from: /\bDefined\b/g, to: '' },
                
                // Nettoyage des espaces
                { from: /\s+/g, to: ' ' }
            ];

            // Appliquer tous les correctifs nuclÃ©aires
            nuclearFixes.forEach(fix => {
                const before = cleaned;
                cleaned = cleaned.replace(fix.from, fix.to);
                if (before !== cleaned) {
                    console.log(`ğŸ”¥ CORRECTIF APPLIQUÃ‰: ${fix.from}`);
                }
            });

            return cleaned.trim();
        }

        function cleanContent() {
            const originalText = document.getElementById('original-text').textContent;
            const cleanedText = nuclearClean(originalText);
            
            document.getElementById('cleaned-text').textContent = cleanedText;
            
            const status = document.getElementById('status');
            if (cleanedText !== originalText) {
                status.innerHTML = '<span class="success">âœ… CONTENU NETTOYÃ‰ AVEC SUCCÃˆS!</span>';
            } else {
                status.innerHTML = '<span class="fail">âŒ AUCUN CHANGEMENT DÃ‰TECTÃ‰</span>';
            }
        }

        function cleanCustomText() {
            const customText = document.getElementById('custom-text').value;
            if (!customText.trim()) {
                alert('Veuillez entrer du texte Ã  nettoyer');
                return;
            }
            
            const cleanedText = nuclearClean(customText);
            const resultDiv = document.getElementById('custom-result');
            
            resultDiv.innerHTML = `
                <div class="original"><strong>Original:</strong><br>${customText}</div>
                <div class="cleaned"><strong>NettoyÃ©:</strong><br>${cleanedText}</div>
                <div class="status ${cleanedText !== customText ? 'success' : 'fail'}">
                    <strong>Statut:</strong> ${cleanedText !== customText ? 'âœ… NETTOYÃ‰' : 'âŒ AUCUN CHANGEMENT'}
                </div>
            `;
        }

        function testAllPatterns() {
            const testPatterns = [
                'Ù…Ø­Ø§Ù…ÙŠ Ø¯ÙŠ Ø²Ø§Ø¯Ù…ØªØµÙ„Ù…Ø­Ø§Ù…ÙŠÙ…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…Ø¨Ø­Ø« Ù‚Ø§Ù†ÙˆÙ†ÙŠØªØ­Ø±ÙŠØ±ProØªØ­Ù„ÙŠÙ„Ù…Ù„ÙØ§ØªV2',
                'Ù…Ø­Ø§Ù…ÙŠ Ø¯ÙŠ Ø²Ø§Ø¯Ù…ØªØµÙ„Ù…Ø­Ø§Ù…ÙŠProØªØ­Ù„ÙŠÙ„Ù…Ù„ÙØ§ØªV2AUTO-TRANSLATE',
                'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠÙ…ØªØµÙ„Avocat',
                'Cabinet d\'AvocatCabinet d\'Avocat',
                'ProAnalyseDossiersV2',
                'Ø§Ù„Ø´Ù‡ÙˆØ¯ Defined ÙÙŠ Ø§Ù„Ù…Ø§Ø¯Ø© 1 Ù…Ù† Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¬Ù†Ø§Ø¦ÙŠØ© Ø§Ù„ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ´Ø©',
                'Ù…Ø­Ø§Ù…ÙŠProØªØ­Ù„ÙŠÙ„',
                'Ù…Ù„ÙØ§ØªV2'
            ];

            let results = '<h3>RÃ©sultats des tests:</h3>';
            let totalTests = 0;
            let passedTests = 0;

            testPatterns.forEach((pattern, index) => {
                totalTests++;
                const cleaned = nuclearClean(pattern);
                const passed = cleaned !== pattern;
                
                if (passed) passedTests++;
                
                results += `
                    <div style="margin: 15px 0; padding: 10px; border: 1px solid #555; border-radius: 5px;">
                        <h4>Test ${index + 1}: ${passed ? 'âœ… RÃ‰USSI' : 'âŒ Ã‰CHOUÃ‰'}</h4>
                        <div class="original"><strong>Original:</strong> "${pattern}"</div>
                        <div class="cleaned"><strong>NettoyÃ©:</strong> "${cleaned}"</div>
                    </div>
                `;
            });

            results += `
                <div style="margin: 20px 0; padding: 15px; background: #333; border-radius: 5px;">
                    <h3>ğŸ”¥ RÃ‰SUMÃ‰ DES TESTS</h3>
                    <p><strong>Total:</strong> ${totalTests}</p>
                    <p><strong>RÃ©ussis:</strong> ${passedTests} âœ…</p>
                    <p><strong>Ã‰chouÃ©s:</strong> ${totalTests - passedTests} âŒ</p>
                    <p><strong>Taux de rÃ©ussite:</strong> ${((passedTests / totalTests) * 100).toFixed(1)}%</p>
                    ${passedTests === totalTests ? '<p class="success">ğŸ‰ TOUS LES TESTS RÃ‰USSIS!</p>' : '<p class="fail">âš ï¸ Certains tests ont Ã©chouÃ©</p>'}
                </div>
            `;

            document.getElementById('test-results').innerHTML = results;
            document.getElementById('all-tests').style.display = 'block';
        }

        // Nettoyer automatiquement au chargement
        window.onload = function() {
            cleanContent();
        };
    </script>
</body>
</html>